# ğŸš€ DevOps Platform WK-Archi

Plateforme DevOps complÃ¨te avec monitoring intÃ©grÃ© pour l'environnement de production.

## ğŸ¯ Architecture

```
Internet â†’ Traefik (80/443) â†’ Services Backend
                â†“
    [Jenkins] [Gitea] [Registry] [Grafana] [Prometheus]
                â†“
        Monitoring Stack (Node-Exporter, cAdvisor)
```

## ğŸ› ï¸ Services DÃ©ployÃ©s

| Service | URL | Description |
|---------|-----|-------------|
| **Traefik** | `https://traefik.wk-archi-o23b-4-5-g7.fr` | Reverse proxy + SSL automatique |
| **Jenkins** | `https://jenkins.wk-archi-o23b-4-5-g7.fr` | CI/CD Pipeline |
| **Gitea** | `https://gitea.wk-archi-o23b-4-5-g7.fr` | Git server |
| **Registry** | `https://registry.wk-archi-o23b-4-5-g7.fr` | Docker registry privÃ© |
| **Grafana** | `https://grafana.wk-archi-o23b-4-5-g7.fr` | Dashboards (admin/admin) |
| **Prometheus** | `https://prometheus.wk-archi-o23b-4-5-g7.fr` | MÃ©triques & monitoring |

## ğŸš€ DÃ©marrage Rapide

### 1. **DÃ©marrage complet**
```bash
./start-production.sh
```

### 2. **Gestion quotidienne**
```bash
./manage-stack.sh [start|stop|restart|status|logs]
```

### 3. **VÃ©rification santÃ©**
```bash
./check-setup.sh
```

### 4. **ArrÃªt**
```bash
./stop-production.sh
```

## ğŸ“Š Monitoring & MÃ©triques

- **Prometheus** collecte automatiquement :
  - MÃ©triques Docker (conteneurs, images, systÃ¨me)
  - MÃ©triques Traefik (requÃªtes, latence)
  - MÃ©triques systÃ¨me (CPU, mÃ©moire, disque)
  - MÃ©triques Gitea et Jenkins

- **Dashboards Grafana** prÃ©-configurÃ©s pour visualiser toutes les mÃ©triques

## ğŸ”§ Maintenance

```bash
# Logs en temps rÃ©el
./manage-stack.sh logs [service]

# Backup automatique
./manage-stack.sh backup

# Mise Ã  jour images
./manage-stack.sh update

# Nettoyage Docker
./manage-stack.sh clean

# Diagnostic rÃ©seau
./manage-stack.sh check-networks
./manage-stack.sh fix-networks
```

## ğŸ›¡ï¸ SÃ©curitÃ©

- âœ… **SSL/TLS automatique** via Let's Encrypt
- âœ… **Certificats auto-renouvelÃ©s**
- âœ… **RÃ©seaux Docker isolÃ©s**
- âœ… **AccÃ¨s sÃ©curisÃ© aux mÃ©triques**
- âœ… **Redirection HTTP â†’ HTTPS**

## ğŸ” DÃ©pannage

| ProblÃ¨me | Solution |
|----------|----------|
| Service ne dÃ©marre pas | `./manage-stack.sh logs [service]` |
| RÃ©seau inaccessible | `./manage-stack.sh fix-networks` |
| MÃ©triques manquantes | RedÃ©marrer Prometheus |
| SSL non gÃ©nÃ©rÃ© | VÃ©rifier DNS + Logs Traefik |

## ğŸ“‹ Structure Projet

```
devops-platform/
â”œâ”€â”€ ğŸ“„ docker-compose.yml           # Configuration principale
â”œâ”€â”€ ğŸ›ï¸ monitoring/prometheus.yml     # Config monitoring  
â”œâ”€â”€ ğŸ“Š grafana/provisioning/         # Dashboards auto
â”œâ”€â”€ ğŸ”§ start-production.sh          # DÃ©marrage complet
â”œâ”€â”€ ğŸ”§ manage-stack.sh             # Gestion quotidienne
â”œâ”€â”€ ğŸ”§ stop-production.sh          # ArrÃªt propre  
â””â”€â”€ ğŸ”§ check-setup.sh              # VÃ©rifications
```

## âš ï¸ Notes Importantes

1. **Premier dÃ©marrage** : `./start-production.sh` configure tout automatiquement
2. **Gestion quotidienne** : Utiliser `./manage-stack.sh` pour toutes les opÃ©rations
3. **Grafana** : Changer le mot de passe admin/admin aprÃ¨s premiÃ¨re connexion
4. **Backups** : Planifier `./manage-stack.sh backup` en cron

---
**ğŸ¯ Production Ready** | **ğŸ“Š Monitoring IntÃ©grÃ©** | **ğŸ”’ SÃ©curisÃ© SSL** | **ğŸš€ DÃ©ploiement 1-clic**
